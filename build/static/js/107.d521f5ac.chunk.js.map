{"version":3,"file":"static/js/107.d521f5ac.chunk.js","mappings":"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","sources":["pages/Admin.tsx"],"sourcesContent":["import { useState, useEffect } from 'react'\r\nimport { useWallet } from '@manahippo/aptos-wallet-adapter'\r\nimport { useNavigate } from 'react-router-dom'\r\nimport { toast } from 'react-hot-toast'\r\n\r\nimport { getResources, initialize, updateConfig } from '../helpers/aptos'\r\nimport CONFIG from '../config'\r\nimport { APTOS_DECIMAL, PERCENT_MULTIPLIER } from '../constants'\r\n\r\nconst Admin = () => {\r\n  const { connected, account, signAndSubmitTransaction } = useWallet()\r\n  const navigate = useNavigate()\r\n\r\n  const [isLoading, setLoading] = useState(false);\r\n  const [tokenMarketConfig, setTokenMarketConfig] = useState<any>()\r\n\r\n  const [fee, setFee] = useState(0);\r\n  const [address1, setAddress1] = useState('');\r\n  const [percent1, setPercent1] = useState(0);\r\n  const [address2, setAddress2] = useState('');\r\n  const [percent2, setPercent2] = useState(0);\r\n\r\n  const [initialized, setInitalized] = useState(false)\r\n\r\n  const handleInitalize = async () => {\r\n    try {\r\n      if (!address1 || !address2 || !percent1 || !percent2 || percent1 + percent2 != 100) {\r\n        toast.error(\"Invalid values!\");\r\n        return;\r\n      }\r\n      setLoading(true)\r\n      if (tokenMarketConfig) {\r\n        const tx = updateConfig(fee, [address1, address2], [percent1, percent2]);\r\n        console.log('tx', tx)\r\n        if (!tx) {\r\n          toast.error(\"Transaction error\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        await signAndSubmitTransaction(tx);\r\n        toast.success(\"Update config success\");\r\n        setLoading(false)\r\n      }\r\n      else {\r\n        const tx = initialize(fee, [address1, address2], [percent1, percent2]);\r\n        console.log('tx', tx)\r\n\r\n        if (!tx) {\r\n          toast.error(\"Transaction error\");\r\n          setLoading(false);\r\n          return;\r\n        }\r\n        await signAndSubmitTransaction(tx);\r\n        toast.success(\"Initialize config success\");\r\n        const { config } = await getResources();\r\n        setTokenMarketConfig(config);\r\n        setInitalized(true)\r\n        setLoading(false)\r\n\r\n      }\r\n    } catch (error) {\r\n      console.log('error', error)\r\n      toast.error(\"Transaction error\");\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(() => {\r\n    (\r\n      async () => {\r\n        try {\r\n          if (!connected || !account || CONFIG.ADMIN !== account?.address) {\r\n            navigate('/')\r\n          }\r\n          setLoading(true)\r\n          const config: any = await getResources()\r\n          if (config.config) {\r\n            setInitalized(true)\r\n            setTokenMarketConfig(config?.config)\r\n            const { fee, royalties } = config?.config.data as any;\r\n            setFee(parseInt(fee) / APTOS_DECIMAL);\r\n            setAddress1(royalties[0].vault_address);\r\n            setPercent1(parseInt(royalties[0].percent) / PERCENT_MULTIPLIER);\r\n            setAddress2(royalties[1].vault_address);\r\n            setPercent2(parseInt(royalties[1].percent) / PERCENT_MULTIPLIER);\r\n          }\r\n          setLoading(false)\r\n        } catch (error) {\r\n          console.log('error', error)\r\n        }\r\n      }\r\n    )()\r\n  }, [account])\r\n\r\n  return (\r\n    <div className=\"admin-page\" >\r\n      {\r\n        isLoading &&\r\n        <div id=\"preloader\"></div>\r\n      }\r\n      <div className=\"admin-container\" >\r\n        <div className=\"admin-control\" >\r\n          <div className=\"grid gap-6 mb-6 w-1/2 my-0 mx-[auto]\">\r\n            <div className=\"w-1/2\">\r\n              <label className=\"block mb-2 text-sm font-medium text-gray-900 text-white\">Fee</label>\r\n              <input\r\n                type=\"number\"\r\n                className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                value={fee}\r\n                onChange={e => setFee(parseFloat(e.target.value))}\r\n              />\r\n            </div>\r\n            <div className=\"w-full\">\r\n              <label className=\"block mb-2 text-sm font-medium text-gray-900 text-white\">Royalty1 Address</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                value={address1}\r\n                onChange={e => setAddress1(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"w-1/2\">\r\n              <label className=\"block mb-2 text-sm font-medium text-gray-900 text-white\">Royalty1 Percent</label>\r\n              <input\r\n                type=\"number\"\r\n                className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                value={percent1}\r\n                onChange={e => setPercent1(parseFloat(e.target.value))}\r\n              />\r\n            </div>\r\n            <div className=\"w-full\">\r\n              <label className=\"block mb-2 text-sm font-medium text-gray-900 text-white\">Royalty2 Address</label>\r\n              <input\r\n                type=\"text\"\r\n                className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                value={address2}\r\n                onChange={e => setAddress2(e.target.value)}\r\n              />\r\n            </div>\r\n            <div className=\"w-1/2\">\r\n              <label className=\"block mb-2 text-sm font-medium text-gray-900 text-white\">Royalty2 Percent</label>\r\n              <input\r\n                type=\"number\"\r\n                className=\"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-blue-500 focus:border-blue-500 block w-full p-2.5 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500\"\r\n                value={percent2}\r\n                onChange={e => setPercent2(parseFloat(e.target.value))}\r\n              />\r\n            </div>\r\n            <div className=\"w-full flex justify-center\">\r\n              <button\r\n                className=\"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded\"\r\n                onClick={() => handleInitalize()}\r\n              >\r\n                {initialized ? 'Update' : 'Initialize'}\r\n              </button>\r\n            </div>\r\n          </div>\r\n\r\n        </div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default Admin"],"names":["_useWallet","useWallet","connected","account","signAndSubmitTransaction","navigate","useNavigate","_useState","useState","_useState2","_slicedToArray","isLoading","setLoading","_useState3","_useState4","tokenMarketConfig","setTokenMarketConfig","_useState5","_useState6","fee","setFee","_useState7","_useState8","address1","setAddress1","_useState9","_useState10","percent1","setPercent1","_useState11","_useState12","address2","setAddress2","_useState13","_useState14","percent2","setPercent2","_useState15","_useState16","initialized","setInitalized","handleInitalize","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","tx","_tx","_yield$getResources","config","wrap","_context","prev","next","toast","abrupt","updateConfig","console","log","initialize","getResources","sent","t0","stop","apply","arguments","useEffect","_callee2","_ref3","_fee","royalties","_context2","CONFIG","address","data","parseInt","APTOS_DECIMAL","vault_address","percent","PERCENT_MULTIPLIER","_jsxs","className","children","_jsx","id","type","value","onChange","e","parseFloat","target","onClick"],"sourceRoot":""}